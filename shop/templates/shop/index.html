{% extends 'shop/basic.html'%}
{% block title %}products{% endblock %}
{% block css %}
 h2{
  font-family: 'Arial', sans-serif;
 }
.col-md-3{
  display: inline-block;
  margin-left:-4px;
}
.col-md-3 img{
  max-width: 227px;
  height: 250px;
}
.carousel-indicators li{
  background-color: red;
}
body .carousel-indicators{
bottom:-25px;


}

body .carousel-control-prev-icon,
body .carousel-control-next-icon{
  background-color: blue;
}

 .carousel-control-prev,
 .carousel-control-next{
 top:35%;
  
   height: 50px;
  width: 50px;
  border-radius: 50%;
  
 
}
 .no-padding{
  padding-left:0;
  padding-right:0;
}



{% endblock %}
{% block body %}
{% load static %}
<h1>hello</h1>
<div class="container"> 
  {% for product, range, nSlides in allProds %}
    <h2 class="my-4">{{ product.0.category }}</h2>
    <div id="demo{{ forloop.counter }}" class="carousel slide my-4" data-bs-ride="carousel">

      <!-- Carousel inner -->
      <div class="container carousel-inner no-padding">
        <div class="carousel-item active">
          <div class="col-xs-3 col-sm-3 col-md-3">
            <div class="card" style="width: 18rem;">
              <img src="/media/{{ product.0.image }}" class="card-img-top" alt="...">
              <div class="card-body">
                <h5 class="card-title">{{ product.0.product_name }}</h5>
                <p class="card-text">{{ product.0.desc }}</p>
                <h5 class="card-title">₹{{ product.0.price }}</h5>
                <button id='pr{{ product.0.id }}' class="btn btn-primary cart">Add to Cart</button>
              </div>
            </div>
          </div>

          {% for i in product|slice:"1:" %}
            <div class="col-xs-3 col-sm-3 col-md-3">
              <div class="card" style="width: 18rem;">
                <img src="/media/{{ i.image }}" class="card-img-top" alt="...">
                <div class="card-body">
                  <h5 class="card-title">{{ i.product_name }}</h5>
                  <p class="card-text">{{ i.desc }}</p>
                  <h5 class="card-title">₹{{ i.price }}</h5>
                  <button id='pr{{ i.id }}' class="btn btn-primary cart">Add to Cart</button>
                </div>
              </div>
            </div>

            {% if forloop.counter|divisibleby:3 and forloop.counter > 0 and not forloop.last %}
              </div><div class="carousel-item">
            {% endif %}
          {% endfor %}
        </div>
      </div>

      <!-- Arrows (now inside the carousel box) -->
      <a class="carousel-control-prev" href="#demo{{ forloop.counter }}" data-bs-slide="prev">
        <span class="carousel-control-prev-icon"></span>
      </a>
      <a class="carousel-control-next" href="#demo{{ forloop.counter }}" data-bs-slide="next">
        <span class="carousel-control-next-icon"></span>
      </a>

    </div>
  {% endfor %}
</div> 
{% endblock %}
{%block js%}

<script>
if(localStorage.getItem('cart') === null){
  var cart = [];
}
else{
  cart = JSON.parse(localStorage.getItem('cart'));
  document.getElementById('cart').innerHTML = Object.keys(cart).length;
}
 $('.cart').click(function(){
  console.log('clicked');
  var idstr = this.id.toString();
  console.log(idstr);
  if(cart[idstr] != undefined){
    cart[idstr] += 1;
  }
  else{
    cart[idstr] = 1;
  }
  console.log(cart);
  localStorage.setItem('cart', JSON.stringify(cart));
   document.getElementById('cart').innerHTML = Object.keys(cart).length;
  

 });

</script>
{%endblock%}
